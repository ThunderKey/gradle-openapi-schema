ComposedPojoGenerator[ANY_OF,Discriminator(propertyName->requiredStringVal, mapping->Optional({UserValue->UserDto, NNVariantsValue->NecessityAndNullabilityDto}))]=[
package com.github.muehmar;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;
import com.github.muehmar.openapi.util.JacksonNullContainer;
import com.github.muehmar.openapi.util.Tristate;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;
import java.util.Optional;
import java.util.function.Function;
import javax.validation.constraints.AssertFalse;
import javax.validation.constraints.AssertTrue;

/**
 * Composition Description
 */
@JsonDeserialize(builder = ComposedAnyofDto.Builder.class)
public class ComposedAnyofDto {
  private final String username;
  private final LocalDate birthdate;
  private final String requiredStringVal;
  private final String requiredNullableStringVal;
  private final boolean isRequiredNullableStringValPresent;
  private final String optionalStringVal;
  private final String optionalNullableStringVal;
  private final boolean isOptionalNullableStringValNull;

  public ComposedAnyofDto(
      String username,
      LocalDate birthdate,
      String requiredStringVal,
      String requiredNullableStringVal,
      boolean isRequiredNullableStringValPresent,
      String optionalStringVal,
      String optionalNullableStringVal,
      boolean isOptionalNullableStringValNull
    ) {
    this.username = username;
    this.birthdate = birthdate;
    this.requiredStringVal = requiredStringVal;
    this.requiredNullableStringVal = requiredNullableStringVal;
    this.isRequiredNullableStringValPresent = isRequiredNullableStringValPresent;
    this.optionalStringVal = optionalStringVal;
    this.optionalNullableStringVal = optionalNullableStringVal;
    this.isOptionalNullableStringValNull = isOptionalNullableStringValNull;
  }

  public static ComposedAnyofDto fromUser(UserDto dto) {
    return new ComposedAnyofDto(
      dto.getUsername(),
      dto.getBirthdate(),
      "UserValue",
      null,
      false,
      null,
      null,
      false
    );
  }

  public static ComposedAnyofDto fromNecessityAndNullability(NecessityAndNullabilityDto dto) {
    return new ComposedAnyofDto(
      null,
      null,
      "NNVariantsValue",
      dto.getRequiredNullableStringValOr(null),
      true,
      dto.getOptionalStringValOr(null),
      dto.getOptionalNullableStringVal().onValue(val -> val).onNull(() -> null).onAbsent(() -> null),
      dto.getOptionalNullableStringVal().onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false)
    );
  }

  @JsonProperty("username")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getUsername() {
    return username;
  }

  @JsonProperty("birthdate")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getBirthdate() {
    return birthdate;
  }

  @JsonProperty("requiredStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredStringVal() {
    return requiredStringVal;
  }

  @JsonProperty("requiredNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredNullableStringVal() {
    return isRequiredNullableStringValPresent ? new JacksonNullContainer<>(requiredNullableStringVal) : null;
  }

  @JsonProperty("optionalStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalStringVal() {
    return optionalStringVal;
  }

  @JsonProperty("optionalNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalNullableStringVal() {
    return isOptionalNullableStringValNull ? new JacksonNullContainer<>(optionalNullableStringVal) : optionalNullableStringVal;
  }

  private int getValidCount() {
    return
      (isValidAgainstUser() ? 1 : 0) +
      (isValidAgainstNecessityAndNullability() ? 1 : 0);
  }

  private boolean isValidAgainstUser() {
    return
      username != null &&
      birthdate != null;
  }

  private boolean isValidAgainstNecessityAndNullability() {
    return
      requiredStringVal != null &&
      isRequiredNullableStringValPresent;
  }

  @AssertTrue(message = "Not valid against the schema described by the discriminator")
  private boolean isValidAgainstTheCorrectSchema() {
    if (requiredStringVal == null) {
      return false;
    }
    switch(requiredStringVal) {
      case "UserValue": return isValidAgainstUser();
      case "NNVariantsValue": return isValidAgainstNecessityAndNullability();
    }
    return false;
  }

  @AssertFalse(message = "Is not valid against one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstNoSchema() {
    return getValidCount() == 0;
  }

  public <T> List<T> fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto) {
    final List<T> result = new ArrayList<>();
    if (isValidAgainstUser()) {
      result.add(onUserDto.apply(asUserDto()));
    }
    if (isValidAgainstNecessityAndNullability()) {
      result.add(onNecessityAndNullabilityDto.apply(asNecessityAndNullabilityDto()));
    }
    return result;
  }

  private UserDto asUserDto() {
    return new UserDto(
      username,
      birthdate
    );
  }

  private NecessityAndNullabilityDto asNecessityAndNullabilityDto() {
    return new NecessityAndNullabilityDto(
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public int hashCode() {
    return Objects.hash(
      username,
      birthdate,
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public boolean equals(Object obj) {
    if (this == obj) return true;
    if (obj == null || this.getClass() != obj.getClass()) return false;
    final ComposedAnyofDto other = (ComposedAnyofDto) obj;
    return Objects.equals(username, other.username)
        && Objects.equals(birthdate, other.birthdate)
        && Objects.equals(requiredStringVal, other.requiredStringVal)
        && Objects.equals(requiredNullableStringVal, other.requiredNullableStringVal)
        && Objects.equals(isRequiredNullableStringValPresent, other.isRequiredNullableStringValPresent)
        && Objects.equals(optionalStringVal, other.optionalStringVal)
        && Objects.equals(optionalNullableStringVal, other.optionalNullableStringVal)
        && Objects.equals(isOptionalNullableStringValNull, other.isOptionalNullableStringValNull);
  }

  @Override
  public String toString() {
    return "ComposedAnyofDto{" +
      "username=" + username +
      ", birthdate=" + birthdate +
      ", requiredStringVal=" + requiredStringVal +
      ", requiredNullableStringVal=" + requiredNullableStringVal +
      ", isRequiredNullableStringValPresent=" + isRequiredNullableStringValPresent +
      ", optionalStringVal=" + optionalStringVal +
      ", optionalNullableStringVal=" + optionalNullableStringVal +
      ", isOptionalNullableStringValNull=" + isOptionalNullableStringValNull +
      "}";
  }

  @JsonPOJOBuilder(withPrefix = "set")
  public static final class Builder {

    private Builder() {
    }

    private String username;
    private LocalDate birthdate;
    private String requiredStringVal;
    private String requiredNullableStringVal;
    private boolean isRequiredNullableStringValPresent = false;
    private String optionalStringVal;
    private String optionalNullableStringVal;
    private boolean isOptionalNullableStringValNull = false;

    /**
     * Username
     */
    @JsonProperty("username")
    private Builder setUsername(String username) {
      this.username = username;
      return this;
    }

    /**
     * Birthdate
     */
    @JsonProperty("birthdate")
    private Builder setBirthdate(LocalDate birthdate) {
      this.birthdate = birthdate;
      return this;
    }

    /**
     * RequiredStringVal
     */
    @JsonProperty("requiredStringVal")
    private Builder setRequiredStringVal(String requiredStringVal) {
      this.requiredStringVal = requiredStringVal;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    @JsonProperty("requiredNullableStringVal")
    private Builder setRequiredNullableStringVal(String requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal;
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    private Builder setRequiredNullableStringVal(Optional<String> requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal.orElse(null);
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * OptionalStringVal
     */
    @JsonProperty("optionalStringVal")
    public Builder setOptionalStringVal(String optionalStringVal) {
      this.optionalStringVal = optionalStringVal;
      return this;
    }

    /**
     * OptionalStringVal
     */
    public Builder setOptionalStringVal(Optional<String> optionalStringVal) {
      this.optionalStringVal = optionalStringVal.orElse(null);
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    @JsonProperty("optionalNullableStringVal")
    public Builder setOptionalNullableStringVal(String optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal;
      this.isOptionalNullableStringValNull = optionalNullableStringVal == null;
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    public Builder setOptionalNullableStringVal(Tristate<String> optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal.onValue(val -> val).onNull(() -> null).onAbsent(() -> null);
      this.isOptionalNullableStringValNull = optionalNullableStringVal.onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false);
      return this;
    }

    public ComposedAnyofDto build() {
      return new ComposedAnyofDto(username, birthdate, requiredStringVal, requiredNullableStringVal, isRequiredNullableStringValPresent, optionalStringVal, optionalNullableStringVal, isOptionalNullableStringValNull);
    }
  }
}
]


ComposedPojoGenerator[ANY_OF,Discriminator(propertyName->requiredStringVal, mapping->Optional.empty)]=[
package com.github.muehmar;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;
import com.github.muehmar.openapi.util.JacksonNullContainer;
import com.github.muehmar.openapi.util.Tristate;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;
import java.util.Optional;
import java.util.function.Function;
import javax.validation.constraints.AssertFalse;
import javax.validation.constraints.AssertTrue;

/**
 * Composition Description
 */
@JsonDeserialize(builder = ComposedAnyofDto.Builder.class)
public class ComposedAnyofDto {
  private final String username;
  private final LocalDate birthdate;
  private final String requiredStringVal;
  private final String requiredNullableStringVal;
  private final boolean isRequiredNullableStringValPresent;
  private final String optionalStringVal;
  private final String optionalNullableStringVal;
  private final boolean isOptionalNullableStringValNull;

  public ComposedAnyofDto(
      String username,
      LocalDate birthdate,
      String requiredStringVal,
      String requiredNullableStringVal,
      boolean isRequiredNullableStringValPresent,
      String optionalStringVal,
      String optionalNullableStringVal,
      boolean isOptionalNullableStringValNull
    ) {
    this.username = username;
    this.birthdate = birthdate;
    this.requiredStringVal = requiredStringVal;
    this.requiredNullableStringVal = requiredNullableStringVal;
    this.isRequiredNullableStringValPresent = isRequiredNullableStringValPresent;
    this.optionalStringVal = optionalStringVal;
    this.optionalNullableStringVal = optionalNullableStringVal;
    this.isOptionalNullableStringValNull = isOptionalNullableStringValNull;
  }

  public static ComposedAnyofDto fromUser(UserDto dto) {
    return new ComposedAnyofDto(
      dto.getUsername(),
      dto.getBirthdate(),
      "User",
      null,
      false,
      null,
      null,
      false
    );
  }

  public static ComposedAnyofDto fromNecessityAndNullability(NecessityAndNullabilityDto dto) {
    return new ComposedAnyofDto(
      null,
      null,
      "NecessityAndNullability",
      dto.getRequiredNullableStringValOr(null),
      true,
      dto.getOptionalStringValOr(null),
      dto.getOptionalNullableStringVal().onValue(val -> val).onNull(() -> null).onAbsent(() -> null),
      dto.getOptionalNullableStringVal().onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false)
    );
  }

  @JsonProperty("username")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getUsername() {
    return username;
  }

  @JsonProperty("birthdate")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getBirthdate() {
    return birthdate;
  }

  @JsonProperty("requiredStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredStringVal() {
    return requiredStringVal;
  }

  @JsonProperty("requiredNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredNullableStringVal() {
    return isRequiredNullableStringValPresent ? new JacksonNullContainer<>(requiredNullableStringVal) : null;
  }

  @JsonProperty("optionalStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalStringVal() {
    return optionalStringVal;
  }

  @JsonProperty("optionalNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalNullableStringVal() {
    return isOptionalNullableStringValNull ? new JacksonNullContainer<>(optionalNullableStringVal) : optionalNullableStringVal;
  }

  private int getValidCount() {
    return
      (isValidAgainstUser() ? 1 : 0) +
      (isValidAgainstNecessityAndNullability() ? 1 : 0);
  }

  private boolean isValidAgainstUser() {
    return
      username != null &&
      birthdate != null;
  }

  private boolean isValidAgainstNecessityAndNullability() {
    return
      requiredStringVal != null &&
      isRequiredNullableStringValPresent;
  }

  @AssertTrue(message = "Not valid against the schema described by the discriminator")
  private boolean isValidAgainstTheCorrectSchema() {
    if (requiredStringVal == null) {
      return false;
    }
    switch(requiredStringVal) {
      case "User": return isValidAgainstUser();
      case "NecessityAndNullability": return isValidAgainstNecessityAndNullability();
    }
    return false;
  }

  @AssertFalse(message = "Is not valid against one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstNoSchema() {
    return getValidCount() == 0;
  }

  public <T> List<T> fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto) {
    final List<T> result = new ArrayList<>();
    if (isValidAgainstUser()) {
      result.add(onUserDto.apply(asUserDto()));
    }
    if (isValidAgainstNecessityAndNullability()) {
      result.add(onNecessityAndNullabilityDto.apply(asNecessityAndNullabilityDto()));
    }
    return result;
  }

  private UserDto asUserDto() {
    return new UserDto(
      username,
      birthdate
    );
  }

  private NecessityAndNullabilityDto asNecessityAndNullabilityDto() {
    return new NecessityAndNullabilityDto(
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public int hashCode() {
    return Objects.hash(
      username,
      birthdate,
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public boolean equals(Object obj) {
    if (this == obj) return true;
    if (obj == null || this.getClass() != obj.getClass()) return false;
    final ComposedAnyofDto other = (ComposedAnyofDto) obj;
    return Objects.equals(username, other.username)
        && Objects.equals(birthdate, other.birthdate)
        && Objects.equals(requiredStringVal, other.requiredStringVal)
        && Objects.equals(requiredNullableStringVal, other.requiredNullableStringVal)
        && Objects.equals(isRequiredNullableStringValPresent, other.isRequiredNullableStringValPresent)
        && Objects.equals(optionalStringVal, other.optionalStringVal)
        && Objects.equals(optionalNullableStringVal, other.optionalNullableStringVal)
        && Objects.equals(isOptionalNullableStringValNull, other.isOptionalNullableStringValNull);
  }

  @Override
  public String toString() {
    return "ComposedAnyofDto{" +
      "username=" + username +
      ", birthdate=" + birthdate +
      ", requiredStringVal=" + requiredStringVal +
      ", requiredNullableStringVal=" + requiredNullableStringVal +
      ", isRequiredNullableStringValPresent=" + isRequiredNullableStringValPresent +
      ", optionalStringVal=" + optionalStringVal +
      ", optionalNullableStringVal=" + optionalNullableStringVal +
      ", isOptionalNullableStringValNull=" + isOptionalNullableStringValNull +
      "}";
  }

  @JsonPOJOBuilder(withPrefix = "set")
  public static final class Builder {

    private Builder() {
    }

    private String username;
    private LocalDate birthdate;
    private String requiredStringVal;
    private String requiredNullableStringVal;
    private boolean isRequiredNullableStringValPresent = false;
    private String optionalStringVal;
    private String optionalNullableStringVal;
    private boolean isOptionalNullableStringValNull = false;

    /**
     * Username
     */
    @JsonProperty("username")
    private Builder setUsername(String username) {
      this.username = username;
      return this;
    }

    /**
     * Birthdate
     */
    @JsonProperty("birthdate")
    private Builder setBirthdate(LocalDate birthdate) {
      this.birthdate = birthdate;
      return this;
    }

    /**
     * RequiredStringVal
     */
    @JsonProperty("requiredStringVal")
    private Builder setRequiredStringVal(String requiredStringVal) {
      this.requiredStringVal = requiredStringVal;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    @JsonProperty("requiredNullableStringVal")
    private Builder setRequiredNullableStringVal(String requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal;
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    private Builder setRequiredNullableStringVal(Optional<String> requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal.orElse(null);
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * OptionalStringVal
     */
    @JsonProperty("optionalStringVal")
    public Builder setOptionalStringVal(String optionalStringVal) {
      this.optionalStringVal = optionalStringVal;
      return this;
    }

    /**
     * OptionalStringVal
     */
    public Builder setOptionalStringVal(Optional<String> optionalStringVal) {
      this.optionalStringVal = optionalStringVal.orElse(null);
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    @JsonProperty("optionalNullableStringVal")
    public Builder setOptionalNullableStringVal(String optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal;
      this.isOptionalNullableStringValNull = optionalNullableStringVal == null;
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    public Builder setOptionalNullableStringVal(Tristate<String> optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal.onValue(val -> val).onNull(() -> null).onAbsent(() -> null);
      this.isOptionalNullableStringValNull = optionalNullableStringVal.onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false);
      return this;
    }

    public ComposedAnyofDto build() {
      return new ComposedAnyofDto(username, birthdate, requiredStringVal, requiredNullableStringVal, isRequiredNullableStringValPresent, optionalStringVal, optionalNullableStringVal, isOptionalNullableStringValNull);
    }
  }
}
]


ComposedPojoGenerator[ANY_OF,null]=[
package com.github.muehmar;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;
import com.github.muehmar.openapi.util.JacksonNullContainer;
import com.github.muehmar.openapi.util.Tristate;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;
import java.util.Optional;
import java.util.function.Function;
import javax.validation.constraints.AssertFalse;

/**
 * Composition Description
 */
@JsonDeserialize(builder = ComposedAnyofDto.Builder.class)
public class ComposedAnyofDto {
  private final String username;
  private final LocalDate birthdate;
  private final String requiredStringVal;
  private final String requiredNullableStringVal;
  private final boolean isRequiredNullableStringValPresent;
  private final String optionalStringVal;
  private final String optionalNullableStringVal;
  private final boolean isOptionalNullableStringValNull;

  public ComposedAnyofDto(
      String username,
      LocalDate birthdate,
      String requiredStringVal,
      String requiredNullableStringVal,
      boolean isRequiredNullableStringValPresent,
      String optionalStringVal,
      String optionalNullableStringVal,
      boolean isOptionalNullableStringValNull
    ) {
    this.username = username;
    this.birthdate = birthdate;
    this.requiredStringVal = requiredStringVal;
    this.requiredNullableStringVal = requiredNullableStringVal;
    this.isRequiredNullableStringValPresent = isRequiredNullableStringValPresent;
    this.optionalStringVal = optionalStringVal;
    this.optionalNullableStringVal = optionalNullableStringVal;
    this.isOptionalNullableStringValNull = isOptionalNullableStringValNull;
  }

  public static ComposedAnyofDto fromUser(UserDto dto) {
    return new ComposedAnyofDto(
      dto.getUsername(),
      dto.getBirthdate(),
      null,
      null,
      false,
      null,
      null,
      false
    );
  }

  public static ComposedAnyofDto fromNecessityAndNullability(NecessityAndNullabilityDto dto) {
    return new ComposedAnyofDto(
      null,
      null,
      dto.getRequiredStringVal(),
      dto.getRequiredNullableStringValOr(null),
      true,
      dto.getOptionalStringValOr(null),
      dto.getOptionalNullableStringVal().onValue(val -> val).onNull(() -> null).onAbsent(() -> null),
      dto.getOptionalNullableStringVal().onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false)
    );
  }

  @JsonProperty("username")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getUsername() {
    return username;
  }

  @JsonProperty("birthdate")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getBirthdate() {
    return birthdate;
  }

  @JsonProperty("requiredStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredStringVal() {
    return requiredStringVal;
  }

  @JsonProperty("requiredNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredNullableStringVal() {
    return isRequiredNullableStringValPresent ? new JacksonNullContainer<>(requiredNullableStringVal) : null;
  }

  @JsonProperty("optionalStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalStringVal() {
    return optionalStringVal;
  }

  @JsonProperty("optionalNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalNullableStringVal() {
    return isOptionalNullableStringValNull ? new JacksonNullContainer<>(optionalNullableStringVal) : optionalNullableStringVal;
  }

  private int getValidCount() {
    return
      (isValidAgainstUser() ? 1 : 0) +
      (isValidAgainstNecessityAndNullability() ? 1 : 0);
  }

  private boolean isValidAgainstUser() {
    return
      username != null &&
      birthdate != null;
  }

  private boolean isValidAgainstNecessityAndNullability() {
    return
      requiredStringVal != null &&
      isRequiredNullableStringValPresent;
  }

  @AssertFalse(message = "Is not valid against one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstNoSchema() {
    return getValidCount() == 0;
  }

  public <T> List<T> fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto) {
    final List<T> result = new ArrayList<>();
    if (isValidAgainstUser()) {
      result.add(onUserDto.apply(asUserDto()));
    }
    if (isValidAgainstNecessityAndNullability()) {
      result.add(onNecessityAndNullabilityDto.apply(asNecessityAndNullabilityDto()));
    }
    return result;
  }

  private UserDto asUserDto() {
    return new UserDto(
      username,
      birthdate
    );
  }

  private NecessityAndNullabilityDto asNecessityAndNullabilityDto() {
    return new NecessityAndNullabilityDto(
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public int hashCode() {
    return Objects.hash(
      username,
      birthdate,
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public boolean equals(Object obj) {
    if (this == obj) return true;
    if (obj == null || this.getClass() != obj.getClass()) return false;
    final ComposedAnyofDto other = (ComposedAnyofDto) obj;
    return Objects.equals(username, other.username)
        && Objects.equals(birthdate, other.birthdate)
        && Objects.equals(requiredStringVal, other.requiredStringVal)
        && Objects.equals(requiredNullableStringVal, other.requiredNullableStringVal)
        && Objects.equals(isRequiredNullableStringValPresent, other.isRequiredNullableStringValPresent)
        && Objects.equals(optionalStringVal, other.optionalStringVal)
        && Objects.equals(optionalNullableStringVal, other.optionalNullableStringVal)
        && Objects.equals(isOptionalNullableStringValNull, other.isOptionalNullableStringValNull);
  }

  @Override
  public String toString() {
    return "ComposedAnyofDto{" +
      "username=" + username +
      ", birthdate=" + birthdate +
      ", requiredStringVal=" + requiredStringVal +
      ", requiredNullableStringVal=" + requiredNullableStringVal +
      ", isRequiredNullableStringValPresent=" + isRequiredNullableStringValPresent +
      ", optionalStringVal=" + optionalStringVal +
      ", optionalNullableStringVal=" + optionalNullableStringVal +
      ", isOptionalNullableStringValNull=" + isOptionalNullableStringValNull +
      "}";
  }

  @JsonPOJOBuilder(withPrefix = "set")
  public static final class Builder {

    private Builder() {
    }

    private String username;
    private LocalDate birthdate;
    private String requiredStringVal;
    private String requiredNullableStringVal;
    private boolean isRequiredNullableStringValPresent = false;
    private String optionalStringVal;
    private String optionalNullableStringVal;
    private boolean isOptionalNullableStringValNull = false;

    /**
     * Username
     */
    @JsonProperty("username")
    private Builder setUsername(String username) {
      this.username = username;
      return this;
    }

    /**
     * Birthdate
     */
    @JsonProperty("birthdate")
    private Builder setBirthdate(LocalDate birthdate) {
      this.birthdate = birthdate;
      return this;
    }

    /**
     * RequiredStringVal
     */
    @JsonProperty("requiredStringVal")
    private Builder setRequiredStringVal(String requiredStringVal) {
      this.requiredStringVal = requiredStringVal;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    @JsonProperty("requiredNullableStringVal")
    private Builder setRequiredNullableStringVal(String requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal;
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    private Builder setRequiredNullableStringVal(Optional<String> requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal.orElse(null);
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * OptionalStringVal
     */
    @JsonProperty("optionalStringVal")
    public Builder setOptionalStringVal(String optionalStringVal) {
      this.optionalStringVal = optionalStringVal;
      return this;
    }

    /**
     * OptionalStringVal
     */
    public Builder setOptionalStringVal(Optional<String> optionalStringVal) {
      this.optionalStringVal = optionalStringVal.orElse(null);
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    @JsonProperty("optionalNullableStringVal")
    public Builder setOptionalNullableStringVal(String optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal;
      this.isOptionalNullableStringValNull = optionalNullableStringVal == null;
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    public Builder setOptionalNullableStringVal(Tristate<String> optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal.onValue(val -> val).onNull(() -> null).onAbsent(() -> null);
      this.isOptionalNullableStringValNull = optionalNullableStringVal.onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false);
      return this;
    }

    public ComposedAnyofDto build() {
      return new ComposedAnyofDto(username, birthdate, requiredStringVal, requiredNullableStringVal, isRequiredNullableStringValPresent, optionalStringVal, optionalNullableStringVal, isOptionalNullableStringValNull);
    }
  }
}
]


ComposedPojoGenerator[ONE_OF,Discriminator(propertyName->requiredStringVal, mapping->Optional({UserValue->UserDto, NNVariantsValue->NecessityAndNullabilityDto}))]=[
package com.github.muehmar;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;
import com.github.muehmar.openapi.util.JacksonNullContainer;
import com.github.muehmar.openapi.util.Tristate;
import java.time.LocalDate;
import java.util.Objects;
import java.util.Optional;
import java.util.function.Function;
import java.util.function.Supplier;
import javax.validation.Valid;
import javax.validation.constraints.AssertFalse;
import javax.validation.constraints.AssertTrue;

/**
 * Composition Description
 */
@JsonDeserialize(builder = ComposedOneofDto.Builder.class)
public class ComposedOneofDto {
  private final String username;
  private final LocalDate birthdate;
  private final String requiredStringVal;
  private final String requiredNullableStringVal;
  private final boolean isRequiredNullableStringValPresent;
  private final String optionalStringVal;
  private final String optionalNullableStringVal;
  private final boolean isOptionalNullableStringValNull;

  public ComposedOneofDto(
      String username,
      LocalDate birthdate,
      String requiredStringVal,
      String requiredNullableStringVal,
      boolean isRequiredNullableStringValPresent,
      String optionalStringVal,
      String optionalNullableStringVal,
      boolean isOptionalNullableStringValNull
    ) {
    this.username = username;
    this.birthdate = birthdate;
    this.requiredStringVal = requiredStringVal;
    this.requiredNullableStringVal = requiredNullableStringVal;
    this.isRequiredNullableStringValPresent = isRequiredNullableStringValPresent;
    this.optionalStringVal = optionalStringVal;
    this.optionalNullableStringVal = optionalNullableStringVal;
    this.isOptionalNullableStringValNull = isOptionalNullableStringValNull;
  }

  public static ComposedOneofDto fromUser(UserDto dto) {
    return new ComposedOneofDto(
      dto.getUsername(),
      dto.getBirthdate(),
      "UserValue",
      null,
      false,
      null,
      null,
      false
    );
  }

  public static ComposedOneofDto fromNecessityAndNullability(NecessityAndNullabilityDto dto) {
    return new ComposedOneofDto(
      null,
      null,
      "NNVariantsValue",
      dto.getRequiredNullableStringValOr(null),
      true,
      dto.getOptionalStringValOr(null),
      dto.getOptionalNullableStringVal().onValue(val -> val).onNull(() -> null).onAbsent(() -> null),
      dto.getOptionalNullableStringVal().onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false)
    );
  }

  @JsonProperty("username")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getUsername() {
    return username;
  }

  @JsonProperty("birthdate")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getBirthdate() {
    return birthdate;
  }

  @JsonProperty("requiredStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredStringVal() {
    return requiredStringVal;
  }

  @JsonProperty("requiredNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredNullableStringVal() {
    return isRequiredNullableStringValPresent ? new JacksonNullContainer<>(requiredNullableStringVal) : null;
  }

  @JsonProperty("optionalStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalStringVal() {
    return optionalStringVal;
  }

  @JsonProperty("optionalNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalNullableStringVal() {
    return isOptionalNullableStringValNull ? new JacksonNullContainer<>(optionalNullableStringVal) : optionalNullableStringVal;
  }

  @Valid
  private Object getOneOf() {
    if (getValidCount() != 1) {
      return null;
    }
    return fold(userdto -> userdto, necessityandnullabilitydto -> necessityandnullabilitydto, () -> null);
  }

  private int getValidCount() {
    return
      (isValidAgainstUser() ? 1 : 0) +
      (isValidAgainstNecessityAndNullability() ? 1 : 0);
  }

  private boolean isValidAgainstUser() {
    return
      username != null &&
      birthdate != null;
  }

  private boolean isValidAgainstNecessityAndNullability() {
    return
      requiredStringVal != null &&
      isRequiredNullableStringValPresent;
  }

  @AssertTrue(message = "Not valid against the schema described by the discriminator")
  private boolean isValidAgainstTheCorrectSchema() {
    if (requiredStringVal == null) {
      return false;
    }
    switch(requiredStringVal) {
      case "UserValue": return isValidAgainstUser();
      case "NNVariantsValue": return isValidAgainstNecessityAndNullability();
    }
    return false;
  }

  @AssertFalse(message = "Is not valid against one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstNoSchema() {
    return getValidCount() == 0;
  }

  @AssertFalse(message = "Is valid against more than one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstMoreThanOneSchema() {
    return getValidCount() > 1;
  }

  public <T> T fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto, Supplier<T> onInvalid) {
    if ("UserValue".equals(requiredStringVal) && isValidAgainstUser()) {
      return onUserDto.apply(asUserDto());
    }
    else if ("NNVariantsValue".equals(requiredStringVal) && isValidAgainstNecessityAndNullability()) {
      return onNecessityAndNullabilityDto.apply(asNecessityAndNullabilityDto());
    }
    else {
      return onInvalid.get();
    }
  }

  public <T> T fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto) {
    return fold(
      onUserDto,
      onNecessityAndNullabilityDto,
      () -> {throw new IllegalStateException("Unable to fold ComposedOneofDto: Not valid against one of the schemas [UserDto, NecessityAndNullabilityDto].");}
    );
  }

  private UserDto asUserDto() {
    return new UserDto(
      username,
      birthdate
    );
  }

  private NecessityAndNullabilityDto asNecessityAndNullabilityDto() {
    return new NecessityAndNullabilityDto(
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public int hashCode() {
    return Objects.hash(
      username,
      birthdate,
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public boolean equals(Object obj) {
    if (this == obj) return true;
    if (obj == null || this.getClass() != obj.getClass()) return false;
    final ComposedOneofDto other = (ComposedOneofDto) obj;
    return Objects.equals(username, other.username)
        && Objects.equals(birthdate, other.birthdate)
        && Objects.equals(requiredStringVal, other.requiredStringVal)
        && Objects.equals(requiredNullableStringVal, other.requiredNullableStringVal)
        && Objects.equals(isRequiredNullableStringValPresent, other.isRequiredNullableStringValPresent)
        && Objects.equals(optionalStringVal, other.optionalStringVal)
        && Objects.equals(optionalNullableStringVal, other.optionalNullableStringVal)
        && Objects.equals(isOptionalNullableStringValNull, other.isOptionalNullableStringValNull);
  }

  @Override
  public String toString() {
    return "ComposedOneofDto{" +
      "username=" + username +
      ", birthdate=" + birthdate +
      ", requiredStringVal=" + requiredStringVal +
      ", requiredNullableStringVal=" + requiredNullableStringVal +
      ", isRequiredNullableStringValPresent=" + isRequiredNullableStringValPresent +
      ", optionalStringVal=" + optionalStringVal +
      ", optionalNullableStringVal=" + optionalNullableStringVal +
      ", isOptionalNullableStringValNull=" + isOptionalNullableStringValNull +
      "}";
  }

  @JsonPOJOBuilder(withPrefix = "set")
  public static final class Builder {

    private Builder() {
    }

    private String username;
    private LocalDate birthdate;
    private String requiredStringVal;
    private String requiredNullableStringVal;
    private boolean isRequiredNullableStringValPresent = false;
    private String optionalStringVal;
    private String optionalNullableStringVal;
    private boolean isOptionalNullableStringValNull = false;

    /**
     * Username
     */
    @JsonProperty("username")
    private Builder setUsername(String username) {
      this.username = username;
      return this;
    }

    /**
     * Birthdate
     */
    @JsonProperty("birthdate")
    private Builder setBirthdate(LocalDate birthdate) {
      this.birthdate = birthdate;
      return this;
    }

    /**
     * RequiredStringVal
     */
    @JsonProperty("requiredStringVal")
    private Builder setRequiredStringVal(String requiredStringVal) {
      this.requiredStringVal = requiredStringVal;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    @JsonProperty("requiredNullableStringVal")
    private Builder setRequiredNullableStringVal(String requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal;
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    private Builder setRequiredNullableStringVal(Optional<String> requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal.orElse(null);
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * OptionalStringVal
     */
    @JsonProperty("optionalStringVal")
    public Builder setOptionalStringVal(String optionalStringVal) {
      this.optionalStringVal = optionalStringVal;
      return this;
    }

    /**
     * OptionalStringVal
     */
    public Builder setOptionalStringVal(Optional<String> optionalStringVal) {
      this.optionalStringVal = optionalStringVal.orElse(null);
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    @JsonProperty("optionalNullableStringVal")
    public Builder setOptionalNullableStringVal(String optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal;
      this.isOptionalNullableStringValNull = optionalNullableStringVal == null;
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    public Builder setOptionalNullableStringVal(Tristate<String> optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal.onValue(val -> val).onNull(() -> null).onAbsent(() -> null);
      this.isOptionalNullableStringValNull = optionalNullableStringVal.onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false);
      return this;
    }

    public ComposedOneofDto build() {
      return new ComposedOneofDto(username, birthdate, requiredStringVal, requiredNullableStringVal, isRequiredNullableStringValPresent, optionalStringVal, optionalNullableStringVal, isOptionalNullableStringValNull);
    }
  }
}
]


ComposedPojoGenerator[ONE_OF,Discriminator(propertyName->requiredStringVal, mapping->Optional.empty)]=[
package com.github.muehmar;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;
import com.github.muehmar.openapi.util.JacksonNullContainer;
import com.github.muehmar.openapi.util.Tristate;
import java.time.LocalDate;
import java.util.Objects;
import java.util.Optional;
import java.util.function.Function;
import java.util.function.Supplier;
import javax.validation.Valid;
import javax.validation.constraints.AssertFalse;
import javax.validation.constraints.AssertTrue;

/**
 * Composition Description
 */
@JsonDeserialize(builder = ComposedOneofDto.Builder.class)
public class ComposedOneofDto {
  private final String username;
  private final LocalDate birthdate;
  private final String requiredStringVal;
  private final String requiredNullableStringVal;
  private final boolean isRequiredNullableStringValPresent;
  private final String optionalStringVal;
  private final String optionalNullableStringVal;
  private final boolean isOptionalNullableStringValNull;

  public ComposedOneofDto(
      String username,
      LocalDate birthdate,
      String requiredStringVal,
      String requiredNullableStringVal,
      boolean isRequiredNullableStringValPresent,
      String optionalStringVal,
      String optionalNullableStringVal,
      boolean isOptionalNullableStringValNull
    ) {
    this.username = username;
    this.birthdate = birthdate;
    this.requiredStringVal = requiredStringVal;
    this.requiredNullableStringVal = requiredNullableStringVal;
    this.isRequiredNullableStringValPresent = isRequiredNullableStringValPresent;
    this.optionalStringVal = optionalStringVal;
    this.optionalNullableStringVal = optionalNullableStringVal;
    this.isOptionalNullableStringValNull = isOptionalNullableStringValNull;
  }

  public static ComposedOneofDto fromUser(UserDto dto) {
    return new ComposedOneofDto(
      dto.getUsername(),
      dto.getBirthdate(),
      "User",
      null,
      false,
      null,
      null,
      false
    );
  }

  public static ComposedOneofDto fromNecessityAndNullability(NecessityAndNullabilityDto dto) {
    return new ComposedOneofDto(
      null,
      null,
      "NecessityAndNullability",
      dto.getRequiredNullableStringValOr(null),
      true,
      dto.getOptionalStringValOr(null),
      dto.getOptionalNullableStringVal().onValue(val -> val).onNull(() -> null).onAbsent(() -> null),
      dto.getOptionalNullableStringVal().onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false)
    );
  }

  @JsonProperty("username")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getUsername() {
    return username;
  }

  @JsonProperty("birthdate")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getBirthdate() {
    return birthdate;
  }

  @JsonProperty("requiredStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredStringVal() {
    return requiredStringVal;
  }

  @JsonProperty("requiredNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredNullableStringVal() {
    return isRequiredNullableStringValPresent ? new JacksonNullContainer<>(requiredNullableStringVal) : null;
  }

  @JsonProperty("optionalStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalStringVal() {
    return optionalStringVal;
  }

  @JsonProperty("optionalNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalNullableStringVal() {
    return isOptionalNullableStringValNull ? new JacksonNullContainer<>(optionalNullableStringVal) : optionalNullableStringVal;
  }

  @Valid
  private Object getOneOf() {
    if (getValidCount() != 1) {
      return null;
    }
    return fold(userdto -> userdto, necessityandnullabilitydto -> necessityandnullabilitydto, () -> null);
  }

  private int getValidCount() {
    return
      (isValidAgainstUser() ? 1 : 0) +
      (isValidAgainstNecessityAndNullability() ? 1 : 0);
  }

  private boolean isValidAgainstUser() {
    return
      username != null &&
      birthdate != null;
  }

  private boolean isValidAgainstNecessityAndNullability() {
    return
      requiredStringVal != null &&
      isRequiredNullableStringValPresent;
  }

  @AssertTrue(message = "Not valid against the schema described by the discriminator")
  private boolean isValidAgainstTheCorrectSchema() {
    if (requiredStringVal == null) {
      return false;
    }
    switch(requiredStringVal) {
      case "User": return isValidAgainstUser();
      case "NecessityAndNullability": return isValidAgainstNecessityAndNullability();
    }
    return false;
  }

  @AssertFalse(message = "Is not valid against one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstNoSchema() {
    return getValidCount() == 0;
  }

  @AssertFalse(message = "Is valid against more than one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstMoreThanOneSchema() {
    return getValidCount() > 1;
  }

  public <T> T fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto, Supplier<T> onInvalid) {
    if ("User".equals(requiredStringVal) && isValidAgainstUser()) {
      return onUserDto.apply(asUserDto());
    }
    else if ("NecessityAndNullability".equals(requiredStringVal) && isValidAgainstNecessityAndNullability()) {
      return onNecessityAndNullabilityDto.apply(asNecessityAndNullabilityDto());
    }
    else {
      return onInvalid.get();
    }
  }

  public <T> T fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto) {
    return fold(
      onUserDto,
      onNecessityAndNullabilityDto,
      () -> {throw new IllegalStateException("Unable to fold ComposedOneofDto: Not valid against one of the schemas [UserDto, NecessityAndNullabilityDto].");}
    );
  }

  private UserDto asUserDto() {
    return new UserDto(
      username,
      birthdate
    );
  }

  private NecessityAndNullabilityDto asNecessityAndNullabilityDto() {
    return new NecessityAndNullabilityDto(
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public int hashCode() {
    return Objects.hash(
      username,
      birthdate,
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public boolean equals(Object obj) {
    if (this == obj) return true;
    if (obj == null || this.getClass() != obj.getClass()) return false;
    final ComposedOneofDto other = (ComposedOneofDto) obj;
    return Objects.equals(username, other.username)
        && Objects.equals(birthdate, other.birthdate)
        && Objects.equals(requiredStringVal, other.requiredStringVal)
        && Objects.equals(requiredNullableStringVal, other.requiredNullableStringVal)
        && Objects.equals(isRequiredNullableStringValPresent, other.isRequiredNullableStringValPresent)
        && Objects.equals(optionalStringVal, other.optionalStringVal)
        && Objects.equals(optionalNullableStringVal, other.optionalNullableStringVal)
        && Objects.equals(isOptionalNullableStringValNull, other.isOptionalNullableStringValNull);
  }

  @Override
  public String toString() {
    return "ComposedOneofDto{" +
      "username=" + username +
      ", birthdate=" + birthdate +
      ", requiredStringVal=" + requiredStringVal +
      ", requiredNullableStringVal=" + requiredNullableStringVal +
      ", isRequiredNullableStringValPresent=" + isRequiredNullableStringValPresent +
      ", optionalStringVal=" + optionalStringVal +
      ", optionalNullableStringVal=" + optionalNullableStringVal +
      ", isOptionalNullableStringValNull=" + isOptionalNullableStringValNull +
      "}";
  }

  @JsonPOJOBuilder(withPrefix = "set")
  public static final class Builder {

    private Builder() {
    }

    private String username;
    private LocalDate birthdate;
    private String requiredStringVal;
    private String requiredNullableStringVal;
    private boolean isRequiredNullableStringValPresent = false;
    private String optionalStringVal;
    private String optionalNullableStringVal;
    private boolean isOptionalNullableStringValNull = false;

    /**
     * Username
     */
    @JsonProperty("username")
    private Builder setUsername(String username) {
      this.username = username;
      return this;
    }

    /**
     * Birthdate
     */
    @JsonProperty("birthdate")
    private Builder setBirthdate(LocalDate birthdate) {
      this.birthdate = birthdate;
      return this;
    }

    /**
     * RequiredStringVal
     */
    @JsonProperty("requiredStringVal")
    private Builder setRequiredStringVal(String requiredStringVal) {
      this.requiredStringVal = requiredStringVal;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    @JsonProperty("requiredNullableStringVal")
    private Builder setRequiredNullableStringVal(String requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal;
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    private Builder setRequiredNullableStringVal(Optional<String> requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal.orElse(null);
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * OptionalStringVal
     */
    @JsonProperty("optionalStringVal")
    public Builder setOptionalStringVal(String optionalStringVal) {
      this.optionalStringVal = optionalStringVal;
      return this;
    }

    /**
     * OptionalStringVal
     */
    public Builder setOptionalStringVal(Optional<String> optionalStringVal) {
      this.optionalStringVal = optionalStringVal.orElse(null);
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    @JsonProperty("optionalNullableStringVal")
    public Builder setOptionalNullableStringVal(String optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal;
      this.isOptionalNullableStringValNull = optionalNullableStringVal == null;
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    public Builder setOptionalNullableStringVal(Tristate<String> optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal.onValue(val -> val).onNull(() -> null).onAbsent(() -> null);
      this.isOptionalNullableStringValNull = optionalNullableStringVal.onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false);
      return this;
    }

    public ComposedOneofDto build() {
      return new ComposedOneofDto(username, birthdate, requiredStringVal, requiredNullableStringVal, isRequiredNullableStringValPresent, optionalStringVal, optionalNullableStringVal, isOptionalNullableStringValNull);
    }
  }
}
]


ComposedPojoGenerator[ONE_OF,null]=[
package com.github.muehmar;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.annotation.JsonDeserialize;
import com.fasterxml.jackson.databind.annotation.JsonPOJOBuilder;
import com.github.muehmar.openapi.util.JacksonNullContainer;
import com.github.muehmar.openapi.util.Tristate;
import java.time.LocalDate;
import java.util.Objects;
import java.util.Optional;
import java.util.function.Function;
import java.util.function.Supplier;
import javax.validation.Valid;
import javax.validation.constraints.AssertFalse;

/**
 * Composition Description
 */
@JsonDeserialize(builder = ComposedOneofDto.Builder.class)
public class ComposedOneofDto {
  private final String username;
  private final LocalDate birthdate;
  private final String requiredStringVal;
  private final String requiredNullableStringVal;
  private final boolean isRequiredNullableStringValPresent;
  private final String optionalStringVal;
  private final String optionalNullableStringVal;
  private final boolean isOptionalNullableStringValNull;

  public ComposedOneofDto(
      String username,
      LocalDate birthdate,
      String requiredStringVal,
      String requiredNullableStringVal,
      boolean isRequiredNullableStringValPresent,
      String optionalStringVal,
      String optionalNullableStringVal,
      boolean isOptionalNullableStringValNull
    ) {
    this.username = username;
    this.birthdate = birthdate;
    this.requiredStringVal = requiredStringVal;
    this.requiredNullableStringVal = requiredNullableStringVal;
    this.isRequiredNullableStringValPresent = isRequiredNullableStringValPresent;
    this.optionalStringVal = optionalStringVal;
    this.optionalNullableStringVal = optionalNullableStringVal;
    this.isOptionalNullableStringValNull = isOptionalNullableStringValNull;
  }

  public static ComposedOneofDto fromUser(UserDto dto) {
    return new ComposedOneofDto(
      dto.getUsername(),
      dto.getBirthdate(),
      null,
      null,
      false,
      null,
      null,
      false
    );
  }

  public static ComposedOneofDto fromNecessityAndNullability(NecessityAndNullabilityDto dto) {
    return new ComposedOneofDto(
      null,
      null,
      dto.getRequiredStringVal(),
      dto.getRequiredNullableStringValOr(null),
      true,
      dto.getOptionalStringValOr(null),
      dto.getOptionalNullableStringVal().onValue(val -> val).onNull(() -> null).onAbsent(() -> null),
      dto.getOptionalNullableStringVal().onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false)
    );
  }

  @JsonProperty("username")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getUsername() {
    return username;
  }

  @JsonProperty("birthdate")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getBirthdate() {
    return birthdate;
  }

  @JsonProperty("requiredStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredStringVal() {
    return requiredStringVal;
  }

  @JsonProperty("requiredNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getRequiredNullableStringVal() {
    return isRequiredNullableStringValPresent ? new JacksonNullContainer<>(requiredNullableStringVal) : null;
  }

  @JsonProperty("optionalStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalStringVal() {
    return optionalStringVal;
  }

  @JsonProperty("optionalNullableStringVal")
  @JsonInclude(JsonInclude.Include.NON_NULL)
  private Object getOptionalNullableStringVal() {
    return isOptionalNullableStringValNull ? new JacksonNullContainer<>(optionalNullableStringVal) : optionalNullableStringVal;
  }

  @Valid
  private Object getOneOf() {
    if (getValidCount() != 1) {
      return null;
    }
    return fold(userdto -> userdto, necessityandnullabilitydto -> necessityandnullabilitydto, () -> null);
  }

  private int getValidCount() {
    return
      (isValidAgainstUser() ? 1 : 0) +
      (isValidAgainstNecessityAndNullability() ? 1 : 0);
  }

  private boolean isValidAgainstUser() {
    return
      username != null &&
      birthdate != null;
  }

  private boolean isValidAgainstNecessityAndNullability() {
    return
      requiredStringVal != null &&
      isRequiredNullableStringValPresent;
  }

  @AssertFalse(message = "Is not valid against one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstNoSchema() {
    return getValidCount() == 0;
  }

  @AssertFalse(message = "Is valid against more than one of the schemas [User, NecessityAndNullability]")
  private boolean isValidAgainstMoreThanOneSchema() {
    return getValidCount() > 1;
  }

  public <T> T fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto, Supplier<T> onInvalid) {
    if (isValidAgainstUser()) {
      return onUserDto.apply(asUserDto());
    }
    else if (isValidAgainstNecessityAndNullability()) {
      return onNecessityAndNullabilityDto.apply(asNecessityAndNullabilityDto());
    }
    else {
      return onInvalid.get();
    }
  }

  public <T> T fold(Function<UserDto, T> onUserDto, Function<NecessityAndNullabilityDto, T> onNecessityAndNullabilityDto) {
    return fold(
      onUserDto,
      onNecessityAndNullabilityDto,
      () -> {throw new IllegalStateException("Unable to fold ComposedOneofDto: Not valid against one of the schemas [UserDto, NecessityAndNullabilityDto].");}
    );
  }

  private UserDto asUserDto() {
    return new UserDto(
      username,
      birthdate
    );
  }

  private NecessityAndNullabilityDto asNecessityAndNullabilityDto() {
    return new NecessityAndNullabilityDto(
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public int hashCode() {
    return Objects.hash(
      username,
      birthdate,
      requiredStringVal,
      requiredNullableStringVal,
      isRequiredNullableStringValPresent,
      optionalStringVal,
      optionalNullableStringVal,
      isOptionalNullableStringValNull
    );
  }

  @Override
  public boolean equals(Object obj) {
    if (this == obj) return true;
    if (obj == null || this.getClass() != obj.getClass()) return false;
    final ComposedOneofDto other = (ComposedOneofDto) obj;
    return Objects.equals(username, other.username)
        && Objects.equals(birthdate, other.birthdate)
        && Objects.equals(requiredStringVal, other.requiredStringVal)
        && Objects.equals(requiredNullableStringVal, other.requiredNullableStringVal)
        && Objects.equals(isRequiredNullableStringValPresent, other.isRequiredNullableStringValPresent)
        && Objects.equals(optionalStringVal, other.optionalStringVal)
        && Objects.equals(optionalNullableStringVal, other.optionalNullableStringVal)
        && Objects.equals(isOptionalNullableStringValNull, other.isOptionalNullableStringValNull);
  }

  @Override
  public String toString() {
    return "ComposedOneofDto{" +
      "username=" + username +
      ", birthdate=" + birthdate +
      ", requiredStringVal=" + requiredStringVal +
      ", requiredNullableStringVal=" + requiredNullableStringVal +
      ", isRequiredNullableStringValPresent=" + isRequiredNullableStringValPresent +
      ", optionalStringVal=" + optionalStringVal +
      ", optionalNullableStringVal=" + optionalNullableStringVal +
      ", isOptionalNullableStringValNull=" + isOptionalNullableStringValNull +
      "}";
  }

  @JsonPOJOBuilder(withPrefix = "set")
  public static final class Builder {

    private Builder() {
    }

    private String username;
    private LocalDate birthdate;
    private String requiredStringVal;
    private String requiredNullableStringVal;
    private boolean isRequiredNullableStringValPresent = false;
    private String optionalStringVal;
    private String optionalNullableStringVal;
    private boolean isOptionalNullableStringValNull = false;

    /**
     * Username
     */
    @JsonProperty("username")
    private Builder setUsername(String username) {
      this.username = username;
      return this;
    }

    /**
     * Birthdate
     */
    @JsonProperty("birthdate")
    private Builder setBirthdate(LocalDate birthdate) {
      this.birthdate = birthdate;
      return this;
    }

    /**
     * RequiredStringVal
     */
    @JsonProperty("requiredStringVal")
    private Builder setRequiredStringVal(String requiredStringVal) {
      this.requiredStringVal = requiredStringVal;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    @JsonProperty("requiredNullableStringVal")
    private Builder setRequiredNullableStringVal(String requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal;
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * RequiredNullableStringVal
     */
    private Builder setRequiredNullableStringVal(Optional<String> requiredNullableStringVal) {
      this.requiredNullableStringVal = requiredNullableStringVal.orElse(null);
      this.isRequiredNullableStringValPresent = true;
      return this;
    }

    /**
     * OptionalStringVal
     */
    @JsonProperty("optionalStringVal")
    public Builder setOptionalStringVal(String optionalStringVal) {
      this.optionalStringVal = optionalStringVal;
      return this;
    }

    /**
     * OptionalStringVal
     */
    public Builder setOptionalStringVal(Optional<String> optionalStringVal) {
      this.optionalStringVal = optionalStringVal.orElse(null);
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    @JsonProperty("optionalNullableStringVal")
    public Builder setOptionalNullableStringVal(String optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal;
      this.isOptionalNullableStringValNull = optionalNullableStringVal == null;
      return this;
    }

    /**
     * OptionalNullableStringVal
     */
    public Builder setOptionalNullableStringVal(Tristate<String> optionalNullableStringVal) {
      this.optionalNullableStringVal = optionalNullableStringVal.onValue(val -> val).onNull(() -> null).onAbsent(() -> null);
      this.isOptionalNullableStringValNull = optionalNullableStringVal.onValue(ignore -> false).onNull(() -> true).onAbsent(() -> false);
      return this;
    }

    public ComposedOneofDto build() {
      return new ComposedOneofDto(username, birthdate, requiredStringVal, requiredNullableStringVal, isRequiredNullableStringValPresent, optionalStringVal, optionalNullableStringVal, isOptionalNullableStringValNull);
    }
  }
}
]